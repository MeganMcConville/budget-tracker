<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="'layouts/default'">
<head>
    <meta charset="UTF-8">
    <script th:src="@{/js/budget.js}"></script>
    <title>Budget</title>
</head>
<body>
<div layout:fragment="content">

    <div id="edit-budget-error-message" class="hidden alert alert-danger">Something went wrong. Please try again.</div>
    <div id="edit-budget-success-message" class="hidden alert alert-success">Budget successfully updated</div>
    <h1 id="budget-title" th:text="${budget.getName()}"></h1>
    <button id="edit-budget-button" class="btn btn-success">Edit</button>
    <button id="cancel-edits-button" class="btn btn-secondary hidden">Cancel</button>
    <button id="save-edits-button" class="btn btn-success hidden" type="submit">Save</button>
    <table id="budget-items-table">
        <tr>
            <th>Name</th>
            <th>Amount</th>
            <th>Type</th>
        </tr>
        <tr th:each="budgetItem: ${budget.getBudgetItems()}" th:attr="data-budget-item-id=${budgetItem.getId()}" class="budget-table-data">
            <td>
                <p class="name" th:text="${budgetItem.getName()}"></p>
                <input class="hidden edit-input name-input" type="text" th:value="${budgetItem.getName()}" th:attr="data-original-value=${budgetItem.getName()}">
            </td>
            <td>
                <p class="amount" th:text="${'$' + budgetItem.getAmount()}"></p>
                <input class="hidden edit-input amount-input" type="number" th:value="${budgetItem.getAmount()}" th:attr="data-original-value=${budgetItem.getAmount()}">
            </td>
            <td>
                <p class="item-type" th:text="${budgetItem.getBudgetItemType()}"></p>
                <select class="hidden edit-input type-input" id="budget-item-type-dropdown" name="budget-item-type-dropdown" th:attr="data-original-value=${budgetItem.getBudgetItemType()}">
                    <option th:each="budgetItemType : ${T(com.megansportfolio.budgettracker.budgetItem.BudgetItemType).values()}"
                            th:value="${budgetItemType}"
                            th:text="${budgetItemType}"
                            th:selected="${budgetItemType == budgetItem.getBudgetItemType()}">
                    </option>
                </select>
            </td>
        </tr>
    </table>

</div>
</body>
</html>